<!-- index.html -->
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <base href="/">
    <title>Quiz Interactivo</title>
    <link rel="stylesheet" href="styles.css">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.3.2/papaparse.min.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js"></script>
</head>
<body>
    <header class="main-header">
        <button id="open-sidebar" aria-label="Abrir menú">&#9776;</button>
        <span id="collection-title">Colección</span>
    </header>

    <aside id="sidebar" class="sidebar">
        <button id="close-sidebar" class="close-sidebar hidden" aria-label="Cerrar menú">&times;</button>
        <div class="menu-section">
            <a href="/" id="home-link">Inicio</a>
            <button id="change-collection-button">Cambiar colección</button>
        </div>
        <div class="menu-section">
            <button id="save-progress">Guardar progreso</button>
            <button id="load-progress">Cargar progreso</button>
            <input type="file" id="file-input" accept=".json" style="display:none">

            <button id="load-csv-button">Cargar CSV</button>
            <input type="file" id="csv-file-input" accept=".csv" style="display:none">

            <button id="reset-progress-button">Reiniciar Progreso</button>
        </div>
        <div class="menu-section">
            <button id="config-button">Configuración</button>
            <button id="login-button">Iniciar sesión</button>
        </div>
    </aside>
    <div class="quiz-container">
        <div id="quiz"></div>
        <!-- Elemento para mostrar mensajes de estado (opcional) -->
        <div id="status-message" class="status-message"></div>
    </div>
    <div id="time-progress" class="time-progress">
        <div id="time-bar" class="time-bar"></div>
        <span id="time-remaining" class="time-remaining"></span>
    </div>
    <!-- Cargar script.js después de Papa Parse -->
    <script src="script.js"></script>
    <!-- Modal de Selección de Colección -->
    <div id="collection-modal-overlay" class="modal-overlay hidden">
        <div id="collection-modal" class="modal-content">
            <h2>Seleccionar colección</h2>
            <select id="collection-select"></select>
            <div class="modal-actions">
                <button id="confirm-collection-button" class="button-primary">Aceptar</button>
            </div>
        </div>
    </div>
    <!-- Modal de Configuración -->
    <div id="config-modal-overlay" class="modal-overlay hidden">
        <div id="config-modal" class="modal-content">
            <button id="close-modal-x" class="close-modal-x" aria-label="Cerrar modal">&times;</button>
            <h2>Configuración del Quiz</h2>

            <div class="config-group">
                <p class="config-group-title">Repeticiones de Preguntas</p>
                <div class="config-option">
                    <label for="config-initial-reps">Repeticiones iniciales por pregunta:</label>
                    <input type="number" id="config-initial-reps" min="1" value="3" step="1">
                    <small>Cambiar esto requiere reiniciar el progreso actual.</small>
                </div>
                <div class="config-option">
                    <label for="config-reps-on-error">Aumento de repeticiones por error:</label>
                    <input type="number" id="config-reps-on-error" min="0" value="1" step="1">
                </div>
            </div>

            <div class="config-group">
                <p class="config-group-title">Apariencia</p>
                <div class="config-option">
                    <label for="config-theme-select">Tema:</label>
                    <select id="config-theme-select">
                        <option value="light">Claro</option>
                        <option value="dark">Oscuro</option>
                    </select>
                </div>
            </div>

            <!-- Aquí se pueden añadir más grupos de configuración en el futuro -->
            <!-- 
            <div class="config-group">
                <p class="config-group-title">Comportamiento</p>
                <div class="config-option checkbox-option">
                    <input type="checkbox" id="config-show-explanation-always">
                    <label for="config-show-explanation-always">Mostrar explicación siempre (no solo en error)</label>
                </div>
            </div>
            -->

            <div class="modal-actions">
                <button id="save-config-button" class="button-primary">Guardar Cambios</button>
                <button id="close-config-modal-button" class="button-secondary">Cerrar</button>
            </div>
        </div>
    </div>
</body>
</html>
